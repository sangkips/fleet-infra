{{- if not .Values.externalSecrets.enabled -}}
# Manual secrets - only created when externalSecrets.enabled is false
# For production, use External Secrets with Vault instead
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "fleet.labels" . | nindent 4 }}
type: Opaque
data:
  # MongoDB Atlas connection string (base64 encoded)
  mongodb-uri: {{ .Values.secrets.mongodbUri | b64enc | quote }}
  # JWT secret key
  jwt-secret: {{ .Values.secrets.jwtSecret | b64enc | quote }}
  # CORS allowed origins
  allowed-origins: {{ .Values.secrets.allowedOrigins | b64enc | quote }}
  # SMTP configuration
  smtp-host: {{ .Values.secrets.smtp.host | b64enc | quote }}
  smtp-port: {{ .Values.secrets.smtp.port | b64enc | quote }}
  smtp-username: {{ .Values.secrets.smtp.username | b64enc | quote }}
  smtp-password: {{ .Values.secrets.smtp.password | b64enc | quote }}
  smtp-from-email: {{ .Values.secrets.smtp.fromEmail | b64enc | quote }}
  smtp-from-name: {{ .Values.secrets.smtp.fromName | b64enc | quote }}
  # App URL
  app-url: {{ .Values.secrets.appUrl | b64enc | quote }}
{{- end }}