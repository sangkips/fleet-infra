global:
  namespace: fleet
  imagePullPolicy: Always

  labels:
    app.kubernetes.io/name: fleet
    app.kubernetes.io/instance: fleet
    app.kubernetes.io/part-of: fleet-app
    app.kubernetes.io/managed-by: argocd

ingress:
  enabled: true
  className: "traefik"
  hosts:
  - api.autoscaleops.com
  - telematics.autoscaleops.com
  tls: true

goApi:
  enabled: true
  image:
    repository: sangkips/fleet-backend
    tag: latest
    pullPolicy: Always
  replicas: 1
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  containerPort: 8080
  env:
    PORT: "8080"
    GIN_MODE: "release"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

nextjsFrontend:
  enabled: true
  image:
    repository: sangkips/fleet
    tag: latest
    pullPolicy: Always
  replicas: 1
  service:
    type: ClusterIP
    port: 80
    targetPort: 3000
  containerPort: 3000
  env:
    PORT: "3000"
    NODE_ENV: "production"
    VITE_API_URL: "https://api.autoscaleops.com/api/v1"
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "200m"

redis:
  enabled: true
  image:
    repository: redis
    tag: 7-alpine
    pullPolicy: IfNotPresent
  service:
    port: 6379
    targetPort: 6379
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

mongodb:
  atlas:
    connectionString: ""

# Prometheus Monitoring Configuration
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    # Labels to match Prometheus serviceMonitorSelector
    labels:
      prometheus: fleet
    interval: 30s
    scrapeTimeout: 10s

# External Secrets Configuration (Vault)
# Uses existing ClusterSecretStore (vault-backend) from investify chart
externalSecrets:
  enabled: true
  refreshInterval: "1h"
  
  vault:
    # Path to secrets in Vault (format: <mount>/data/<path>)
    secretPath: "fleet/production"

# Fallback manual secrets (only used when externalSecrets.enabled is false)
secrets:
  mongodbUri: ""
  jwtSecret: ""
  allowedOrigins: ""
  appUrl: ""
  smtp:
    host: ""
    port: "587"
    username: ""
    password: ""
    fromEmail: ""
    fromName: ""